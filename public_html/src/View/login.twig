{% extends "tmpl/base.twig" %}

{% block md %}
    <title>Login - GangsterClub.com</title>
{% endblock %}

{% block css %}
    <link rel="stylesheet" href="css/login.css" />
{% endblock %}

{% block content %}
    {% if (uUID or UID) %}
        <a class="logout" href="{{ docRoot }}logout">Logout</a>
    {% endif %}
    <section class="flex flex-col md:flex-row h-screen">
        <div class="bg-transparent flex w-full h-full md:w-1/2 xl:w-3/4 items-center justify-center">
            <div class="bg-logo bg-no-repeat bg-cover w-96 h-96 m-auto"></div>
        </div>
        <div class="text-gray-700 dark:text-gray-200 bg-white dark:bg-slate-900 w-full md:max-w-md lg:max-w-full md:mx-auto md:w-1/2 xl:w-1/4 h-screen px-6 lg:px-16 xl:px-12
                flex items-center justify-center">

            <div class="w-full h-100">
                <form class="mt-6" method="POST">
                    {% for error in login.errors %}
                        <div class="error">{{ error }}</div>
                    {% endfor %}
                    {% for success in login.success %}
                        <div class="success">{{ success }}</div>
                    {% endfor %}
                    {% if (uUID or UID) %}
                        {% set name, value, type, submitName = 'totp', totp, 'text', 'submit_totp' %}
                        {% set label = __('verification-code') %}
                        {% set invalidTxt = __('provide-valid-totp') %}
                        {% set submit = __('verify') %}
                        {% include "tmpl/forms.6-digit-otp-input.twig" %}
                    {% else %}
                        {% set name, value, type, submitName = 'email', email, 'email', 'submit_login' %}
                        {% set label = __('email-address') %}
                        {% set invalidTxt = __('provide-valid-email-address') %}
                        {% set submit = __('sign-in') %}
                        {% include "tmpl/forms.text-input.twig" %}
                    {% endif %}
                    <input type="submit" name="{{ submitName }}" class="w-full block bg-black hover:bg-black focus:bg-black dark:bg-gray-200 dark:hover:bg-gray-200
                        dark:focus:bg-gray-200 text-white dark:text-black font-semibold px-4 py-3 mt-6" value="{{ submit }}" />

                </form>
                {% if not uUID and not UID %}
                    <hr class="my-6 border-gray-400 dark:border-gray-600 w-full">
                    <p class="mt-8">{{ __('need-an-account') }}
                        <a href="#" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 font-semibold">{{ __('create-an-account') }}</a>.
                    </p>
                {% endif %}
            </div>
        </div>
    </section>
{% endblock %}

{% block js %}
    <script type="text/javascript">
        // use this simple function to automatically focus on the next input
        function focusNextInput(el, prevId, nextId) {
            if (el.value.length === 0) {
                if (prevId) {
                    document.getElementById(prevId).focus();
                }
            }

            if (el.value.length !== 0) {
                if (nextId) {
                    document.getElementById(nextId).focus();
                }
            }
        }

        document.querySelectorAll('[data-focus-input-init]').forEach(function(element) {
            element.addEventListener('keyup', function() {
                const prevId = this.getAttribute('data-focus-input-prev');
                const nextId = this.getAttribute('data-focus-input-next');
                focusNextInput(this, prevId, nextId);
            });
        });
    </script>
{% endblock %}
